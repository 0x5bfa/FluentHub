<UserControl
    x:Class="FluentHub.Uwp.UserControls.LoadErrorDisplay"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="using:FluentHub.Uwp.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:FluentHub.Uwp.UserControls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:toolkit="using:Microsoft.Toolkit.Uwp.UI.Controls"
    d:DesignHeight="300"
    d:DesignWidth="400"
    mc:Ignorable="d">

    <UserControl.Resources>
        <ResourceDictionary>
            <converters:ObjectToBoolConverter x:Key="ObjectToBoolConverter" />
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid
        Padding="32"
        HorizontalAlignment="Stretch"
        VerticalAlignment="Stretch">
        <StackPanel
            x:Name="SenteredRootContent"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Spacing="8">
            <TextBlock
                HorizontalAlignment="Center"
                FontSize="36"
                Style="{StaticResource BodyStrongTextBlockStyle}"
                Text="Something went wrong" />
            <TextBlock
                HorizontalAlignment="Center"
                Style="{StaticResource BodyTextBlockStyle}"
                Text="{x:Bind TaskException.Message, Mode=OneWay}" />
            <ContentPresenter
                x:Name="ErrorActionContentPresenter"
                x:Load="{x:Bind Action, Converter={StaticResource ObjectToBoolConverter}, Mode=OneWay}"
                Content="{x:Bind Action, Mode=OneWay}" />
        </StackPanel>
        <StackPanel
            x:Name="BottomAlignedRootContent"
            HorizontalAlignment="Center"
            VerticalAlignment="Bottom"
            Orientation="Horizontal"
            Spacing="8">
            <Button
                x:Name="ShowExceptionDetailsContentDialogButton"
                Click="OnShowExceptionDetailsContentDialogButtonClick"
                Style="{StaticResource LinkLikeButtonStyle}"
                ToolTipService.ToolTip="Display the stack trace results in the dialog.">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <FontIcon FontSize="14" Glyph="&#xE71E;" />
                    <TextBlock
                        Foreground="{ThemeResource ApplicationSecondaryForegroundThemeBrush}"
                        Style="{StaticResource BodyTextBlockStyle}"
                        Text="See stack trace" />
                </StackPanel>
            </Button>
            <TextBlock
                Margin="2,0"
                VerticalAlignment="Center"
                Foreground="{ThemeResource ApplicationSecondaryForegroundThemeBrush}"
                Style="{ThemeResource BodyTextBlockStyle}"
                Text="•" />
            <Button
                x:Name="OpenLogFileLocationButton"
                Click="OnOpenLogFileLocationButtonClick"
                Style="{StaticResource LinkLikeButtonStyle}"
                ToolTipService.ToolTip="Open the log folder where app error details are stored in File Explorer.">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <FontIcon FontSize="14" Glyph="&#xED25;" />
                    <TextBlock
                        Foreground="{ThemeResource ApplicationSecondaryForegroundThemeBrush}"
                        Style="{StaticResource BodyTextBlockStyle}"
                        Text="Open log file location" />
                </StackPanel>
            </Button>
            <TextBlock
                Margin="2,0"
                VerticalAlignment="Center"
                Foreground="{ThemeResource ApplicationSecondaryForegroundThemeBrush}"
                Style="{ThemeResource BodyTextBlockStyle}"
                Text="•" />
            <Button
                x:Name="ReportThisIssueButton"
                Click="OnReportThisIssueButtonClick"
                Style="{StaticResource LinkLikeButtonStyle}"
                ToolTipService.ToolTip="In the future, app will automatically paste the error contents, details, logs, and send them to FluentHub team on GitHub when you repot this issue. Currently, if you perform this action, you will be redirected to the GitHub web page.">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <FontIcon FontSize="14" Glyph="&#xE723;" />
                    <TextBlock
                        Foreground="{ThemeResource ApplicationSecondaryForegroundThemeBrush}"
                        Style="{StaticResource BodyTextBlockStyle}"
                        Text="Report this issue" />
                </StackPanel>
            </Button>
        </StackPanel>
    </Grid>
</UserControl>
